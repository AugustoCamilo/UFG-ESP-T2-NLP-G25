<!DOCTYPE html>
<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="%F0%9F%8F%9B%EF%B8%8F-chatbot-rag---programa-quita-goi%C3%A1s">ğŸ›ï¸ Chatbot RAG - Programa Quita GoiÃ¡s</h1>
<blockquote>
<p><strong>Arquitetura:</strong> Modular Monolith Async | <strong>OrquestraÃ§Ã£o:</strong> LangGraph | <strong>LLM:</strong> Google Gemini 2.5 Flash</p>
</blockquote>
<p>Este projeto implementa um assistente virtual de alta performance baseado em <strong>RAG (Retrieval-Augmented Generation)</strong>.
Projetado para responder dÃºvidas sobre legislaÃ§Ã£o tributÃ¡ria com precisÃ£o, ele utiliza uma arquitetura assÃ­ncrona moderna, persistÃªncia estruturada via <strong>SQLModel</strong> e um pipeline de recuperaÃ§Ã£o hÃ­brida (Vetorial + Re-ranking).</p>
<p>O grande diferencial Ã© a sua <strong>SuÃ­te de Auditoria e AvaliaÃ§Ã£o (QA Suite)</strong>, que permite a criaÃ§Ã£o de &quot;Gabaritos&quot; (Ground Truth) persistentes no banco de dados, garantindo transparÃªncia e mÃ©tricas auditÃ¡veis (Hit Rate, MRR, Precision@K).</p>
<hr>
<h2 id="%F0%9F%92%A1-dica-de-visualiza%C3%A7%C3%A3o-diagramas">ğŸ’¡ Dica de VisualizaÃ§Ã£o (Diagramas)</h2>
<p>Este documento contÃ©m diagramas de arquitetura complexos usando a sintaxe <strong>Mermaid</strong>. Para visualizÃ¡-los corretamente (renderizados como grÃ¡ficos e nÃ£o como cÃ³digo), recomenda-se o seguinte ambiente:</p>
<ul>
<li><strong>Editor de CÃ³digo:</strong> <a href="https://code.visualstudio.com/download">Visual Studio Code (VS Code)</a></li>
<li><strong>ExtensÃ£o Recomendada:</strong> <a href="https://marketplace.visualstudio.com/items?itemName=bierner.markdown-mermaid">Markdown Preview Mermaid Support</a> (por Matt Bierner).</li>
</ul>
<hr>
<h2 id="%F0%9F%A7%A9-arquitetura-da-solu%C3%A7%C3%A3o">ğŸ§© Arquitetura da SoluÃ§Ã£o</h2>
<p>O sistema opera de forma assÃ­ncrona para garantir fluidez na UI enquanto processa chamadas pesadas de LLM e Banco de Dados.</p>
<pre><code class="language-mermaid"><div class="mermaid">graph TD
    UsuÃ¡rio -->|Entrada / Pergunta| UI[AplicaÃ§Ã£o Principal Web]
    UI -->|Chamada AssÃ­ncrona| Chain[LangGraph RAG Chain]
    
    subgraph "Base de Conhecimento"
        PDF[PDF Docs/XML] -->|AlimentaÃ§Ã£o| ETL[PyMuPDF + Splitter]
        ETL -->|Embeddings| VectorDB[(ChromaDB)]
    end

    subgraph "Motor Principal"
        Chain -->|1. Carrega HistÃ³rico| SQL[(SQLite/SQLModel)]
        Chain -->|2. RecuperaÃ§Ã£o contexto| Retriever[RecuperaÃ§Ã£o HÃ­brida]
        Retriever -->|RecuperaÃ§Ã£o| VectorDB
        Retriever -->|PrecisÃ£o| Reranker[Cross-Encoder]
        Chain -->|3. Prompt estruturado| LLM[Google Gemini 2.5]
    end

    LLM -->|Resposta| Chain
    Chain -->|Registros de PersistÃªncia| SQL
    Chain -->|Resposta| UI
</div></code></pre>
<h3 id="fluxo-de-trabalho-de-dados-e-qa">Fluxo de Trabalho de Dados e QA</h3>
<p>Este diagrama ilustra como as ferramentas de suporte (<code>validate_*.py</code> e <code>edit_*.py</code>) interagem para garantir a qualidade contÃ­nua do chatbot.</p>
<pre><code class="language-mermaid"><div class="mermaid">graph TD
    %% Atores (Humanos)
    QA(QA / Especialista) -->|1. Cria Gabarito| ValDB[validate_vector_db.py]
    Analyst(Analista de Dados) -->|2. Corrige & Cura| ValEdit[edit_evaluation.py]
    Analyst -->|3. Analisa MÃ©tricas| ValEval[validate_evaluation.py]
    Admin(Admin do Sistema) -->|4. Audita ProduÃ§Ã£o| ValHist[validate_history_db.py]

    %% Componentes Reutilizados do Core
    subgraph "MÃ³dulo Principal"
        Recuperador[VectorRetriever]
    end

    %% Armazenamento
    subgraph "Camada de Dados"
        VectorDB[(ChromaDB)]
        SQL_Val[(Tabela: ValidationRuns)]
        SQL_Prod[(Tabela: ChatHistory)]
    end

    %% Fluxo de Coleta (CriaÃ§Ã£o)
    ValDB -->|UsuÃ¡rio| Recuperador
    Recuperador -->|Busca| VectorDB
    ValDB -->|Insert: Queries & Scores| SQL_Val

    %% Fluxo de Curadoria (EdiÃ§Ã£o)
    ValEdit <-->|Leitura/AtualizaÃ§Ã£o: Recalcula MÃ©tricas| SQL_Val

    %% Fluxo de AnÃ¡lise (Leitura)
    ValEval -->|Leitura: Hit Rate / MRR| SQL_Val
    ValEval <-->|Importar/Exportar Dataset| XML[ğŸ“„ Arquivos XML]

    %% Fluxo de Auditoria (ProduÃ§Ã£o)
    ValHist -->|Leitura: SessÃµes & Feedback| SQL_Prod
    ValHist -->|Exportar Dados| CSV[ğŸ“Š CSV / XML / Charts]

</div></code></pre>
<h3 id="destaques-t%C3%A9cnicos">Destaques TÃ©cnicos</h3>
<ul>
<li><strong>Hybrid Retrieval:</strong> Combina a velocidade da busca vetorial (<code>all-MiniLM-L6-v2</code>) com a precisÃ£o semÃ¢ntica de um Cross-Encoder (<code>ms-marco-MiniLM-L6-v2</code>) para reordenar os resultados.</li>
<li><strong>LangGraph:</strong> OrquestraÃ§Ã£o de estado (<em>Stateful</em>) para gerenciar o fluxo de conversaÃ§Ã£o e memÃ³ria de curto prazo.</li>
<li><strong>Async SQLModel:</strong> Uso de <code>aiosqlite</code> e <code>SQLAlchemy 2.0</code> para persistÃªncia nÃ£o-bloqueante de histÃ³ricos, feedbacks e mÃ©tricas de validaÃ§Ã£o.</li>
<li><strong>Auditabilidade Total:</strong> Todas as validaÃ§Ãµes manuais (Gabaritos) sÃ£o salvas no banco de dados, permitindo a reproduÃ§Ã£o de testes e auditoria de viÃ©s.</li>
</ul>
<hr>
<h2 id="%F0%9F%93%82-estrutura-do-projeto">ğŸ“‚ Estrutura do Projeto</h2>
<pre class="hljs"><code><div>ğŸ“‚ rag_chatbot
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                        # [Input] Coloque aqui seus PDFs e XMLs
â”‚
â”œâ”€â”€ ğŸ“‚ database/                    # [Storage] PersistÃªncia Relacional
â”‚   â””â”€â”€ ğŸ’¾ chat_solution.db         # HistÃ³rico, Feedbacks e ValidaÃ§Ãµes
â”‚
â”œâ”€â”€ ğŸ“‚ vector_db/                   # [Storage] Banco Vetorial ChromaDB
â”‚   â””â”€â”€ ğŸ’¾ ...                      # Arquivos do ChromaDB
â”‚
â”œâ”€â”€ ğŸ“œ app.py                       # [App] Interface de Chat (ProduÃ§Ã£o)
â”œâ”€â”€ ğŸ“œ rag_chain.py                 # [Core] LÃ³gica RAG e LangGraph
â”œâ”€â”€ ğŸ“œ vector_retriever.py          # [Core] Motor de Busca (Recall + Rerank)
â”œâ”€â”€ ğŸ“œ database.py                  # [Model] Schemas do Banco (SQLModel)
â”œâ”€â”€ ğŸ“œ settings.py                  # [Config] VariÃ¡veis de Ambiente e Caminhos
â”œâ”€â”€ ğŸ“œ ui_utils.py                  # [Utils] Helpers de UI (ImpressÃ£o, Foco)
â”‚
â”œâ”€â”€ ğŸ”§ ETL &amp; IngestÃ£o
â”‚   â”œâ”€â”€ ğŸ“œ ingest.py                # Pipeline PDF -&gt; Chunks Fixos -&gt; VectorDB
â”‚   â””â”€â”€ ğŸ“œ ingest_xml.py            # Pipeline XML -&gt; Chunks SemÃ¢nticos -&gt; VectorDB
â”‚
â””â”€â”€ ğŸ› ï¸ Ferramentas de Auditoria &amp; QA
    â”œâ”€â”€ ğŸ“œ validate_vector_db.py    # [Coleta] Teste de Retrieval e CriaÃ§Ã£o de Gabarito
    â”œâ”€â”€ ğŸ“œ edit_evaluation.py       # [Curadoria] Editor para corrigir avaliaÃ§Ãµes e recalcular mÃ©tricas
    â”œâ”€â”€ ğŸ“œ validate_evaluation.py   # [AnÃ¡lise] Dashboard de MÃ©tricas (HR, MRR, P@K)
    â””â”€â”€ ğŸ“œ validate_history_db.py   # [Auditoria] Logs de ProduÃ§Ã£o, GrÃ¡ficos e Feedbacks

</div></code></pre>
<h2 id="%F0%9F%9A%80-instala%C3%A7%C3%A3o-e-configura%C3%A7%C3%A3o">ğŸš€ InstalaÃ§Ã£o e ConfiguraÃ§Ã£o</h2>
<h3 id="1-pr%C3%A9-requisitos">1. PrÃ©-requisitos</h3>
<ul>
<li>Python 3.10+</li>
<li>Chave de API do Google AI Studio (<code>GEMINI_API_KEY</code>)</li>
</ul>
<h3 id="2-configura%C3%A7%C3%A3o-do-ambiente">2. ConfiguraÃ§Ã£o do Ambiente</h3>
<p><strong>OpÃ§Ã£o A: Usando <code>venv</code> (PadrÃ£o do Python)</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># 1. Crie o ambiente (usando o nome 'rag_solution')</span>
python -m venv rag_solution

<span class="hljs-comment"># 2. Ative o ambiente</span>
<span class="hljs-comment"># Windows</span>
.\rag_solution\Scripts\activate
<span class="hljs-comment"># macOS/Linux</span>
<span class="hljs-built_in">source</span> rag_solution/bin/activate
</div></code></pre>
<hr>
<p><strong>OpÃ§Ã£o B: Usando <code>conda</code> (Anaconda)</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># 1. Crie o ambiente (usando o nome 'rag_solution' e especificando Python 3.10+)</span>
conda create -n rag_solution python=3.10

<span class="hljs-comment"># 2. Ative o ambiente</span>
conda activate rag_solution
</div></code></pre>
<h3 id="3-instala%C3%A7%C3%A3o-das-depend%C3%AAncias">3. InstalaÃ§Ã£o das DependÃªncias</h3>
<p>Com o ambiente virtual (<code>rag_solution</code>) ativo, instale todas as bibliotecas listadas no <code>requirements.txt</code>:</p>
<pre class="hljs"><code><div>pip install -r requirements.txt
</div></code></pre>
<h3 id="4-vari%C3%A1veis-de-ambiente">4. VariÃ¡veis de Ambiente</h3>
<p>Crie um arquivo <code>.env</code> na raiz do projeto:</p>
<pre class="hljs"><code><div><span class="hljs-attr">GEMINI_API_KEY</span>=<span class="hljs-string">"sua_chave_aqui"</span>
<span class="hljs-attr">DATABASE_URL</span>=<span class="hljs-string">"sqlite+aiosqlite:///./database/chat_database.db"</span>
</div></code></pre>
<h3 id="5-ingest%C3%A3o-de-dados">5. IngestÃ£o de Dados</h3>
<p>Coloque seus arquivos na pasta <code>docs/</code> e execute o pipeline correspondente ao formato dos seus dados:</p>
<p><strong>OpÃ§Ã£o A: Arquivos PDF (IngestÃ£o PadrÃ£o)</strong></p>
<p>Para processar documentos PDF brutos. O sistema farÃ¡ a limpeza, sanitizaÃ§Ã£o e divisÃ£o (splitting) automÃ¡tica baseada em caracteres.</p>
<pre class="hljs"><code><div>python ingest.py
</div></code></pre>
<p><strong>OpÃ§Ã£o B: Arquivos XML (Semantic Chunking)</strong></p>
<p>Para ingerir dados que jÃ¡ passaram por um processo de &quot;Semantic Chunking&quot; externo e estÃ£o estruturados em XML (Pergunta/Resposta/Metadados).</p>
<pre class="hljs"><code><div>python ingest_xml.py
</div></code></pre>
<p><em>(Nota: Ambos os scripts recriam automaticamente as pastas <code>database/</code> e <code>vector_db/</code>. <strong>Execute apenas um dos scripts</strong>, dependendo de qual fonte de dados vocÃª deseja utilizar no momento.)</em></p>
<hr>
<h2 id="%F0%9F%96%A5%EF%B8%8F-guia-de-utiliza%C3%A7%C3%A3o">ğŸ–¥ï¸ Guia de UtilizaÃ§Ã£o</h2>
<p>O projeto Ã© composto por <strong>5 aplicaÃ§Ãµes Streamlit</strong> distintas. Execute-as em terminais separados conforme a necessidade.</p>
<h3 id="1-chatbot-produ%C3%A7%C3%A3o">1. Chatbot (ProduÃ§Ã£o)</h3>
<p>A interface principal para o usuÃ¡rio final.</p>
<pre class="hljs"><code><div>streamlit run app.py
</div></code></pre>
<h3 id="2-su%C3%ADte-de-avalia%C3%A7%C3%A3o-data-driven-development">2. SuÃ­te de AvaliaÃ§Ã£o (Data-Driven Development)</h3>
<p>Ferramentas para engenheiros e especialistas de domÃ­nio validarem a qualidade do bot.</p>
<h4 id="a-coleta-de-m%C3%A9tricas-o-%22gabarito%22">A. Coleta de MÃ©tricas (O &quot;Gabarito&quot;)</h4>
<p>Ferramenta para testar queries e marcar manualmente quais chunks sÃ£o relevantes. Essencial para calcular a precisÃ£o do sistema.</p>
<pre class="hljs"><code><div>streamlit run validate_vector_db.py
</div></code></pre>
<blockquote>
<p><strong>Fluxo de Uso:</strong></p>
<ol>
<li>Digite uma pergunta.</li>
<li>Veja os resultados do RAG.</li>
<li>Marque os checkboxes dos trechos corretos (<strong>Hit Rate</strong>).</li>
<li>Selecione o melhor trecho no Radio Button (<strong>MRR</strong>).</li>
<li>Salve a avaliaÃ§Ã£o.</li>
</ol>
</blockquote>
<h4 id="b-dashboard-de-performance">B. Dashboard de Performance</h4>
<p>Analisa os dados coletados na etapa anterior, exibindo mÃ©tricas consolidadas.</p>
<pre class="hljs"><code><div>streamlit run validate_evaluation.py
</div></code></pre>
<ul>
<li><strong>MÃ©tricas:</strong> Hit Rate, MRR, Precision@K e Precision@1.</li>
<li><strong>Import/Export:</strong> Permite importar dados validados de XML para anÃ¡lises histÃ³ricas.</li>
</ul>
<h4 id="c-auditoria-de-hist%C3%B3rico">C. Auditoria de HistÃ³rico</h4>
<p>Monitora o uso real em produÃ§Ã£o.</p>
<pre class="hljs"><code><div>streamlit run validate_history_db.py
</div></code></pre>
<ul>
<li><strong>Resumo Visual:</strong> GrÃ¡ficos de Pizza interativos comparando satisfaÃ§Ã£o (Likes/Dislikes) entre UsuÃ¡rios Reais e Testes SintÃ©ticos.</li>
<li><strong>Backup:</strong> ExportaÃ§Ã£o completa do histÃ³rico de conversas e feedbacks para XML e CSV.</li>
</ul>
<hr>
<h2 id="%F0%9F%93%8A-entendendo-as-m%C3%A9tricas">ğŸ“Š Entendendo as MÃ©tricas</h2>
<table>
<thead>
<tr>
<th>MÃ©trica</th>
<th>O que mede?</th>
<th>InterpretaÃ§Ã£o</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Hit Rate</strong></td>
<td>Capacidade de encontrar <em>alguma</em> resposta Ãºtil.</td>
<td>Se a resposta certa apareceu (mesmo em 3Âº lugar), Ã© 1. Se nÃ£o, 0.</td>
</tr>
<tr>
<td><strong>MRR</strong></td>
<td>Qualidade da ordenaÃ§Ã£o (Ranking).</td>
<td>Se a melhor resposta Ã© a 1Âª, MRR=1.0. Se for a 2Âª, MRR=0.5. Se for a 3Âª, MRR=0.33.</td>
</tr>
<tr>
<td><strong>Precision@K</strong></td>
<td>Densidade</td>
<td>Quanto &quot;ruÃ­do&quot; veio junto? (Ex: 2 chunks Ãºteis de 3 = 0.66)</td>
</tr>
<tr>
<td><strong>Precision@1</strong></td>
<td>&quot;Tiro Certeiro&quot;</td>
<td>O 1Âº resultado sozinho responde Ã  pergunta?</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="%F0%9F%9B%A0%EF%B8%8F-stack-tecnol%C3%B3gico">ğŸ› ï¸ Stack TecnolÃ³gico</h2>
<ul>
<li><strong>Frontend:</strong> Streamlit 1.50 (com Altair Charts)</li>
<li><strong>Core AI:</strong> LangChain 1.0, LangGraph, Google Gemini 2.5</li>
<li><strong>Data:</strong> SQLModel (SQLAlchemy + Pydantic), ChromaDB (Vector Store)</li>
<li><strong>NLP:</strong> Sentence-Transformers (Embeddings + Cross-Encoders)</li>
<li><strong>Utils:</strong> PyMuPDF, Python-Dotenv</li>
</ul>
<hr>
<h2 id="6-%F0%9F%94%84-nota-sobre-o-desenvolvimento-a-abordagem-%22vibe-coding%22">6. ğŸ”„ Nota sobre o Desenvolvimento: A Abordagem &quot;Vibe Coding&quot;</h2>
<p>Este projeto foi construÃ­do utilizando o paradigma de Vibe Coding (Intent-Based Programming).
Diferente da codificaÃ§Ã£o tradicional, aqui o foco deslocou-se da sintaxe manual para a arquitetura, fluxo de dados e regras de negÃ³cio, enquanto a IA assumiu a implementaÃ§Ã£o pesada com padrÃµes de engenharia modernos.</p>
<p>A colaboraÃ§Ã£o seguiu uma dinÃ¢mica fluida de &quot;Human-in-the-Loop&quot;:</p>
<ul>
<li>
<p><strong>ğŸ‘¨â€ğŸ’» Engenheiro Humano (Arquiteto &amp; Vibe Keeper):</strong></p>
<ul>
<li>ResponsÃ¡vel pela <strong>IntenÃ§Ã£o e VisÃ£o</strong>: DefiniÃ§Ã£o do &quot;quÃª&quot; e do &quot;porquÃª&quot;.</li>
<li>Arquitetura de SoluÃ§Ã£o: Escolha da stack (LangGraph, SQLModel, Streamlit).</li>
<li>Curadoria de CÃ³digo: RevisÃ£o crÃ­tica de seguranÃ§a, lÃ³gica de negÃ³cios e auditoria de mÃ©tricas.</li>
</ul>
</li>
<li>
<p><strong>ğŸ¤– Google Gemini (AI Pair Programmer):</strong></p>
<ul>
<li>ImplementaÃ§Ã£o &quot;Zero-Friction&quot;: TransformaÃ§Ã£o de prompts em linguagem natural diretamente em cÃ³digo Python tipado, assÃ­ncrono e documentado.</li>
<li>RefatoraÃ§Ã£o Proativa: AplicaÃ§Ã£o imediata de Design Patterns e migraÃ§Ã£o de scripts sÃ­ncronos para asyncio.</li>
<li>ManutenÃ§Ã£o de Contexto: GeraÃ§Ã£o de testes e documentaÃ§Ã£o tÃ©cnica alinhada ao estilo do projeto.</li>
<li>RefatoraÃ§Ã£o para padrÃµes modernos (migraÃ§Ã£o para <code>async/await</code>).</li>
</ul>
</li>
<li>
<p><strong>ğŸ”„ Fluxo de Trabalho:</strong></p>
<ul>
<li><strong>IntenÃ§Ã£o</strong>: O desenvolvedor define o objetivo (ex: &quot;Criar um dashboard de auditoria com grÃ¡ficos&quot;).</li>
<li><strong>Vibe Coding</strong>: A IA gera a soluÃ§Ã£o completa seguindo as diretrizes de qualidade do projeto.</li>
<li><strong>Refinamento</strong>: Ajustes finos de UI/UX e validaÃ§Ã£o de lÃ³gica pelo humano.</li>
</ul>
</li>
</ul>
<pre><code class="language-mermaid"><div class="mermaid">graph TD
    A[ğŸ‘¨â€ğŸ’» IntenÃ§Ã£o & Arquitetura] -->|Linguagem Natural| B[ğŸ¤– Vibe Coding Engine]
    B -->|âš¡ CÃ³digo de Alta qualidade| C[ğŸ‘¨â€ğŸ’» RevisÃ£o de CÃ³digo & Teste]
    C -->|âŒ Refinamento| B
    C -->|âœ… Aprovado| D[ğŸš€ Deploy/Commit]
</div></code></pre>

</body>
</html>
